"use strict";let shows=[],showsFavorites=[];function paintShows(){const t=document.querySelector(".show-result__list");let e="";for(const t of shows){const o=t.show.name;let s="";e+=`\n    <li class="show-result__showItem">\n        <button class="show-result__button" data-index="${shows.indexOf(t)}" data-id="${t.show.id}">\n          <img class="show-result__image" src="${s=null!==t.show.image?t.show.image.medium:"https://via.placeholder.com/210x295.png"}"/>\n          <h3 class="show-result__title">${o}</h3>\n        </button>\n      </li>`}t.innerHTML=e;const o=document.querySelectorAll(".show-result__button");for(const t of o)t.addEventListener("click",selectFavoriteShows)}function selectFavoriteShows(t){const e=t.currentTarget.dataset.index,o=shows[e],s=showsFavorites.indexOf(o),n=-1===s,a=t.currentTarget.dataset.id;console.log("este es el id del objeto selecionado:",a),console.log(showsFavorites.includes(o)),n?showsFavorites.push(o):showsFavorites.splice(s,1),setLocalStorage(),paintFavoriteShows()}function paintFavoriteShows(){const t=document.querySelector(".show-result__list--favorites");let e="";for(const t of showsFavorites){const o=t.show.name,s=showsFavorites.indexOf(t);let n="";e+=`\n    <li class="show-result__showItem">\n        <img class="show-result__image" src="${n=null!==t.show.image?t.show.image.medium:"https://via.placeholder.com/210x295.png"}"/>\n        <h3 class="show-result__title">${o}</h3>\n        <button class="favorites__button" data-index="${s}">Eliminar</button>\n    </li>`}t.innerHTML=e;const o=document.querySelectorAll(".favorites__button");for(const t of o)t.addEventListener("click",handleRemoveClick)}function handleRemoveClick(){const t=event.currentTarget.dataset.index;showsFavorites.splice(t,1),setLocalStorage(),paintFavoriteShows()}function setLocalStorage(){localStorage.setItem("shows",JSON.stringify(showsFavorites))}function getLocalStorage(){const t=JSON.parse(localStorage.getItem("showsFavorites"));null!==t&&(showsFavorites=t,paintShows())}function getServerData(t){t.preventDefault();const e=document.querySelector(".search-form__input");fetch(`http://api.tvmaze.com/search/shows?q=${e.value}`).then(function(t){return t.json()}).then(function(t){shows=t,paintShows()}).catch(function(t){console.log("error",t)})}const searchButton=document.querySelector(".search-form__button");searchButton.addEventListener("click",getServerData);