"use strict";let shows=[],showsFavorites=[];function paintShows(){const t=document.querySelector(".search-result__list");let e="";for(const t of shows){const s=t.show.name;let o="";e+=`\n    <li class="search-result__item">\n        <button class="search-result__button" data-index="${shows.indexOf(t)}" data-id="${t.show.id}">\n          <img class="search-result__image" src="${o=null!==t.show.image?t.show.image.medium:"https://via.placeholder.com/210x295.png"}"/>\n          <h3 class="search-result__title">${s}</h3>\n        </button>\n      </li>`}t.innerHTML=e;const s=document.querySelectorAll(".search-result__button");for(const t of s)t.addEventListener("click",selectFavoriteShows)}function selectFavoriteShows(t){const e=t.currentTarget.dataset.index,s=shows[e];const o=showsFavorites.findIndex(function(t,e,o){return t.show.id===s.show.id});-1===o?showsFavorites.push(s):showsFavorites.splice(o,1),setLocalStorage(),paintFavoriteShows()}function paintFavoriteShows(){const t=document.querySelector(".search-result__list--favorites");let e="";for(const t of showsFavorites){const s=t.show.name,o=showsFavorites.indexOf(t);let n="";e+=`\n    <li class="search-result__item">\n        <img class="search-result__image" src="${n=null!==t.show.image?t.show.image.medium:"https://via.placeholder.com/210x295.png"}"/>\n        <h3 class="search-result__title">${s}</h3>\n        <button class="favorites__button" data-index="${o}">Eliminar</button>\n    </li>`}t.innerHTML=e;const s=document.querySelectorAll(".favorites__button");for(const t of s)t.addEventListener("click",handleRemoveClick)}function handleRemoveClick(){const t=event.currentTarget.dataset.index;showsFavorites.splice(t,1),setLocalStorage(),paintFavoriteShows()}function setLocalStorage(){localStorage.setItem("showsFavorites",JSON.stringify(showsFavorites))}function getLocalStorage(){const t=JSON.parse(localStorage.getItem("showsFavorites"));null!==t&&(showsFavorites=t,paintFavoriteShows())}function getServerData(t){t.preventDefault();const e=document.querySelector(".search-form__input");fetch(`http://api.tvmaze.com/search/shows?q=${e.value}`).then(function(t){return t.json()}).then(function(t){shows=t,paintShows()}).catch(function(t){console.log("error",t)})}const searchButton=document.querySelector(".search-form__button");searchButton.addEventListener("click",getServerData),getLocalStorage();